plugins {
    id 'com.diffplug.gradle.p2.asmaven' version '3.7.0'
}


apply plugin: 'java'

// The dependencies we'd like to pull from Eclipse's p2 repositories
def eclipseDeps = [
        // The dependencies we actually use
        'org.eclipse.jdt.core',
        'org.eclipse.text',

        // Their transitives
        'org.eclipse.core.contenttype',
        'org.eclipse.core.jobs',
        'org.eclipse.core.runtime',
        'org.eclipse.core.resources',
        'org.eclipse.equinox.common',
        'org.eclipse.equinox.preferences',
        'org.eclipse.osgi'
]
// build a maven repo in our build folder containing these artifacts
p2AsMaven {

    group 'p2', {
        repo 'http://gama.unthinkingdepths.fr/'
        iu 'msi.gama.core'
    }

}

repositories {

    maven { url 'http://maven.geotoolkit.org' }
    maven { url 'https://mvnrepository.com/'}
    maven {	url 'https://oss.sonatype.org/content/repositories/snapshots/' }
    maven { url 'http://dl.bintray.com/anrgenstar/genstar-packages'}
    maven { url  'http://download.osgeo.org/webdav/geotools/'}
    maven { url 'http://repo.boundlessgeo.com/main/' }
    mavenCentral()

}

dependencies {

    compile 'p2:ummisco.gama.annotations:+'
    compile 'p2:msi.gama.core:+'
    compile 'org.genstar:genstar-core:1.0'
    compile 'org.genstar:genstar-spll:1.0'
    compile 'org.genstar:genstar-spin:1.0'
    compile 'org.genstar:genstar-gospl:1.0'

}

subprojects {
    repositories {
        mavenCentral()
        // SNAPSHOT versions are free to rely on other SNAPSHOT libraries
        if (project.version.endsWith('SNAPSHOT')) {
            maven {
                url 'https://oss.sonatype.org/content/repositories/snapshots/'
            }
        }
        // local eclipse maven (created by Goomph)
        maven {
            url rootProject.file('target.p2/build/p2asmaven/maven')
        }
    }


}